import React, { Component } from "react";
import { LineChart } from "react-chartkick";
import "chart.js";
import ChartAnnotationsPlugin from "chartjs-plugin-annotation";

class Chart extends Component {
  render() {
    // appx openingEnergy: kde obtained from PSI:Biology
    var plotSuccessData = {
      0: 1.98738964346095e-6,
      0.67346939: 1.98738964346095e-6,
      1.34693878: 1.98738964346095e-6,
      2.02040816: 3.979134904699868e-5,
      2.69387755: 0.0005614693463309397,
      3.36734694: 0.0015994783332591886,
      4.04081633: 0.007059343154791341,
      4.71428571: 0.01959674401987233,
      5.3877551: 0.03344511636457853,
      6.06122449: 0.05846219766091034,
      6.73469388: 0.08812439667470215,
      7.40816327: 0.11259352563647178,
      8.08163265: 0.1357682202648517,
      8.75510204: 0.14211606213908856,
      9.42857143: 0.14570074633478247,
      10.10204082: 0.1351020183433137,
      10.7755102: 0.1268336184495585,
      11.44897959: 0.10785947362483832,
      12.12244898: 0.09562433135532121,
      12.79591837: 0.07934998819340157,
      13.46938776: 0.05797529403020855,
      14.14285714: 0.04464152892547112,
      14.81632653: 0.031056912967964322,
      15.48979592: 0.019465426689115016,
      16.16326531: 0.013458606780850584,
      16.83673469: 0.009290589646287092,
      17.51020408: 0.0072191819217718774,
      18.18367347: 0.00481998609914608,
      18.85714286: 0.003381550290010877,
      19.53061224: 0.0027037492134495186,
      20.20408163: 0.0018640790321791344,
      20.87755102: 0.0010672153576768515,
      21.55102041: 0.00030447049761963126,
      22.2244898: 0.0001961151937122446,
      22.89795918: 4.936898440389916e-5,
      23.57142857: 4.358236613730531e-5,
      24.24489796: 0.0002030749922550749,
      24.91836735: 0.00014137135559688042,
      25.59183673: 0.00010345471895537332,
      26.26530612: 4.37357584524152e-5,
      26.93877551: 1.1173963588429985e-6,
      27.6122449: 1.1173963588429985e-6,
      28.28571429: 1.1173963588429985e-6,
      28.95918367: 1.1173963588429985e-6,
      29.63265306: 1.1173963588429985e-6,
      30.30612245: 1.1173963588429985e-6,
      30.97959184: 1.1173963588429985e-6,
      31.65306122: 1.1173963588429985e-6,
      32.32653061: 1.1173963588429985e-6,
      33: 1.1173963588429985e-6
    };

    var plotFailedData = {
      0: 5.437758361148604e-6,
      0.67346939: 5.437758361148604e-6,
      1.34693878: 5.437758361148604e-6,
      2.02040816: 5.397169299206176e-5,
      2.69387755: 0.00032248749940829824,
      3.36734694: 0.0012660911082912243,
      4.04081633: 0.005280751012420593,
      4.71428571: 0.009821077717552978,
      5.3877551: 0.015469945304867552,
      6.06122449: 0.023015782861449723,
      6.73469388: 0.033982478828445295,
      7.40816327: 0.048250752743149404,
      8.08163265: 0.06741365641897708,
      8.75510204: 0.07535156640619728,
      9.42857143: 0.0834311789634686,
      10.10204082: 0.09314100388060208,
      10.7755102: 0.10061604385988879,
      11.44897959: 0.10365480589977134,
      12.12244898: 0.10144817567167914,
      12.79591837: 0.09734173335858409,
      13.46938776: 0.09274376624962825,
      14.14285714: 0.08880318802397255,
      14.81632653: 0.08443827862752538,
      15.48979592: 0.07766982571253733,
      16.16326531: 0.06290949102413919,
      16.83673469: 0.051156199195859016,
      17.51020408: 0.03966004606891997,
      18.18367347: 0.03015605437361742,
      18.85714286: 0.023554815332062107,
      19.53061224: 0.0191747904887778,
      20.20408163: 0.013276183928893279,
      20.87755102: 0.00912923396576851,
      21.55102041: 0.005819565146953443,
      22.2244898: 0.004128214349275207,
      22.89795918: 0.0036718639573756536,
      23.57142857: 0.0034950737504194852,
      24.24489796: 0.002985476454187301,
      24.91836735: 0.0018129676325811912,
      25.59183673: 0.0012868050108287184,
      26.26530612: 0.0009077691932529392,
      26.93877551: 0.0005222456180022826,
      27.6122449: 0.0002047648974706759,
      28.28571429: 6.214594206722606e-5,
      28.95918367: 0.00011287484615139223,
      29.63265306: 0.00019046772982714063,
      30.30612245: 0.00016835234521245699,
      30.97959184: 7.676975792930047e-5,
      31.65306122: 1.805206870461312e-5,
      32.32653061: 2.1888850127133413e-6,
      33: 2.1888850127133413e-6
    };

    var plotData = [
      { name: "Success", data: plotSuccessData },
      { name: "Failure", data: plotFailedData }
    ];
    return (
      <LineChart
        data={plotData}
        xtitle="Opening Energy"
        ytitle="Density"
        dataset={{
          pointRadius: 0,
          pointHoverRadius: 0.5,
          linetension: 1.5
        }}
        library={{
          responsive: true,
          title: {
            display: true,
            position: "bottom",
            text:
              "Distributions for PSI:Biology targets (8,780 'Success' and 2,650 'Failure' exper" +
              "iments)."
          },
          scales: {
            yAxes: [
              {
                id: "probDensity",
                type: "linear",
                ticks: {
                  //beginAtZero: true,
                },
                scaleLabel: {
                  display: true,
                  labelString: "Density"
                }
              }
            ],

            xAxes: [
              {
                beginAtZero: true,
                // type: 'category',
                position: "bottom",
                display: false
              },
              {
                id: "x-axis-2",
                type: "linear",
                position: "bottom",
                display: true,

                scaleLabel: {
                  display: true,
                  labelString: "Opening energy (KCal/mol)"
                },

                ticks: {
                  min: 0,
                  max: 35,
                  stepSize: 2
                }
              }
            ]
          },
          annotation: {
            annotations: [
              {
                type: "line",
                drawTime: "afterDatasetsDraw",
                mode: "vertical",
                scaleID: "x-axis-2",
                value: this.props.current,
                borderColor: "rgb(75, 192, 192)",
                borderWidth: 2,
                label: {
                  enabled: true,
                  content: "Current",
                  position: "bottom"
                }
              },
              {
                type: "line",
                drawTime: "afterDatasetsDraw",
                mode: "vertical",
                scaleID: "x-axis-2",
                value: this.props.selected,
                borderColor: "rgba(75, 192, 192, 0.8)",
                borderWidth: 2,
                label: {
                  enabled: true,
                  content: "Top optimised",
                  position: "top"
                }
              },
              {
                type: "line",
                drawTime: "afterDatasetsDraw",
                mode: "vertical",
                scaleID: "x-axis-2",
                value: this.props.input,
                borderColor: "rgb(75, 192, 192, 0.8)",
                borderWidth: 2,
                label: {
                  enabled: true,
                  content: "Input",
                  position: "center"
                }
              }
            ]
          }
        }}
      />
    );
  }
}

export default Chart;
